なきたいときは　なけばいいから 
ねえ むりはしないで 
なみだかれたら えがおはひらく 
ほら、もうわらってる  

とまどうのは　みらいはあるから  
まふしさにまけない、ようきがほしい 

every day and night with you 
ちいさなきみのてを　にぎりしめるから   
every day every night every way 
つながる　かんじょこを　ずっとたしかめよう 
いま、ものがたりはbegin  

-----------
--[[A曝]]--
-----------
--[[
	室嬬兆紺我
	犢慘篏此SP，寄杷
	宙峰挫慎営稱荒叩症院振堋娠蟒派夛撹彬墾扮低辛參契峭緩肝彬墾綜凪虹崔匯嫖返兎隼朔低寵匯嫖兎撒営祿瀕‐姫／議朕炎扮低辛參虹崔匯嫖返兎聞岻涙丼隼朔乎‐姫／議聞喘宀寵匯嫖兎。
	彜蓑済蛄ね┨
]]--
LuaAnxian = sgs.CreateTriggerSkill{
	name = "LuaAnxian",
	frequency = sgs.Skill_NotFrequent,
	events = {sgs.DamageCaused, sgs.TargetConfirming, sgs.SlashEffected},
	on_trigger = function(self, event, player, data)
		local room = player:getRoom()
		if event == sgs.DamageCaused then
			local damage = data:toDamage()
			local card = damage.card
			if card and card:isKindOf("Slash") then
				if not damage.chain and not damage.transfer then
					local dest = damage.to
					if room:askForSkillInvoke(player, self:objectName(), data) then
						if not dest:isKongcheng() then
							room:askForDiscard(dest, self:objectName(), 1, 1)
						else
							player:drawCards(1)
						end
						return true
					end
				end
			end
		elseif event == sgs.TargetConfirming then
			local use = data:toCardUse()
			local card = use.card
			if card and card:isKindOf("Slash") then
				if room:askForCard(player, ".", "@anxian-discard", sgs.QVariant(), sgs.CardDiscarded) then
					player:addMark("anxian")
                    use.from:drawCards(1)
				end
			end
		elseif event == sgs.SlashEffected then
			if player:getMark("anxian") > 0 then
				local count = player:getMark("anxian") - 1
                player:setMark("anxian", count)
                return true
            end
			return false
		end
	end
}
--[[
	室嬬兆紺火
	犢慘篏唆繍撹兆，化膳弗
	宙峰些兎竣粁低辛參僉夲曾兆返兎方音犁筏墜篷叔弼綜凪嶄返兎富議叔弼資誼返兎謹議叔弼議匯嫖返兎旺婢幣岻飛緩兎音葎菜孟低寵匯嫖兎。耽竣粁渙惨痢
	彜蓑済蛄ね┨
]]--
AnxuCard = sgs.CreateSkillCard{
	name = "AnxuCard",
	target_fixed = false, 
	will_throw = true, 
	filter = function(self, targets, to_select) 
		if to_select == sgs.Self then
			return false
		elseif #targets == 0 then
			return true
		elseif #targets == 1 then
			local first = targets[1]
			return to_select:getHandcardNum() ~= first:getHandcardNum()
		end
		return false
	end,
	feasible = function(self, targets)
		return #targets == 2
	end,
	on_use = function(self, room, source, targets)
		local playerA = targets[1]
		local playerB = targets[2]
		local from
		local to
		if playerA:getHandcardNum() > playerB:getHandcardNum() then
			from = playerB
			to = playerA
		else
			from = playerA
			to = playerB
		end
		local id = room:askForCardChosen(from, to, "h", self:objectName())
		local card = sgs.Sanguosha:getCard(id)
		room:obtainCard(from, card)
		room:showCard(from, id)
		if card:getSuit() ~= sgs.Card_Spade then
			source:drawCards(1)
		end
	end
}
LuaAnxu = sgs.CreateViewAsSkill{
	name = "LuaAnxu",
	n = 0,
	view_as = function(self, cards)
		local card = AnxuCard:clone()
		card:setSkillName(self:objectName())
		return card
	end, 
	enabled_at_play = function(self, player)
		return not player:hasUsed("#AnxuCard")
	end, 
}